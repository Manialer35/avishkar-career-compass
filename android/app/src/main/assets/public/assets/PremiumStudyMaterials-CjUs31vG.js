import{r as v,x as B,s as M,j as e,b as g,L as _,A as y,a as T,F as A,B as U,C as z,M as I,z as E}from"./index-Cu2NTO9G.js";import{u as $,F as b}from"./useFolders-gOyR_fvA.js";import{F as G,C as R}from"./FolderCard-DxNZeh4c.js";import{T as C,a as w,b as x,c as u}from"./tabs-BrghG_ne.js";import{B as V}from"./building-C5SW9RgV.js";import{U as q}from"./users-l7SdCE1-.js";import{G as D}from"./graduation-cap-CxAxTjF3.js";const O=i=>{const a=i.toLowerCase();return a.includes("math")||a.includes("गणित")?R:a.includes("current affairs")||a.includes("समसामयिक")?A:a.includes("exam")||a.includes("परीक्षा")?U:a.includes("age")||a.includes("वय")?z:a.includes("geography")||a.includes("भूगोल")?I:a.includes("history")||a.includes("इतिहास")?V:a.includes("group")||a.includes("समूह")?q:a.includes("education")||a.includes("शिक्षण")?D:E},h=({product:i})=>{const a=O(i.name),t=(c,f)=>f==="lifetime"?"Lifetime Access":c?c===1?"1 Month Access":`${c} Months Access`:"";return e.jsx("div",{className:"bg-white rounded-lg shadow-md border-l-4 border-academy-red transition-all hover:shadow-lg",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-academy-red/10",children:e.jsx(a,{size:32,className:"text-academy-red"})}),e.jsx("h3",{className:"text-lg font-semibold text-academy-primary line-clamp-2",children:i.name}),i.description&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-lg font-bold text-academy-red",children:i.isUpcoming&&i.price===0?"Price TBA":`₹${i.price.toFixed(2)}`}),(i.duration_months||i.duration_type)&&e.jsx("span",{className:"text-sm text-academy-secondary font-medium",children:t(i.duration_months,i.duration_type)})]}),i.isUpcoming?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-center text-academy-secondary text-sm mb-2",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Coming Soon"]}),e.jsx(g,{className:"w-full bg-gray-300 text-gray-600 cursor-not-allowed",disabled:!0,children:"Not Available Yet"})]}):e.jsx(g,{className:"w-full bg-academy-red hover:bg-academy-red/90 text-white",asChild:!0,children:e.jsx(_,{to:`/purchase/${i.id}`,children:"Purchase"})})]})})})},Z=()=>{const[i,a]=v.useState([]),[t,c]=v.useState(!0),[f,N]=B(),m=f.get("folderId"),{folders:F}=$(),p=F.filter(s=>s.is_premium),n=i.filter(s=>!s.isUpcoming),d=i.filter(s=>s.isUpcoming),l=s=>m?s.filter(o=>o.folder_id===m):s.filter(o=>!o.folder_id);v.useEffect(()=>{P()},[]);const P=async()=>{try{c(!0);const{data:s,error:o}=await M.from("study_materials").select("*").eq("ispremium",!0).order("created_at",{ascending:!1});if(o)throw o;if(s){const k=s.map(r=>({id:r.id,name:r.title||r.name,description:r.description||"",price:r.price||0,imageSrc:r.thumbnailurl||"https://via.placeholder.com/350x200/1e3a8a/ffffff?text="+encodeURIComponent(r.title||r.name),duration_months:r.duration_months,duration_type:r.duration_type,folder_id:r.folder_id,isUpcoming:r.is_upcoming}));a(k)}}catch(s){console.error("Error fetching premium materials:",s)}finally{c(!1)}},L=s=>{N({folderId:s})},S=()=>{N({})},j=p.find(s=>s.id===m);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"mr-4",asChild:!0,children:e.jsx(_,{to:"/",children:e.jsx(y,{className:"h-6 w-6"})})}),e.jsx("h1",{className:"text-2xl font-bold text-academy-primary",children:"Premium Study Materials"})]}),m?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(g,{variant:"ghost",onClick:S,className:"flex items-center gap-2",children:[e.jsx(y,{size:16}),"Back to Folders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{size:20,className:"text-academy-red"}),e.jsx("h2",{className:"text-xl font-semibold",children:j==null?void 0:j.name})]})]}),e.jsxs(C,{defaultValue:"available",className:"w-full",children:[e.jsxs(w,{className:"mb-4",children:[e.jsxs(x,{value:"available",children:["Available (",l(n).length,")"]}),e.jsxs(x,{value:"upcoming",children:["Coming Soon (",l(d).length,")"]})]}),e.jsx(u,{value:"available",children:t?e.jsx("div",{className:"text-center py-8",children:"Loading premium materials..."}):l(n).length===0?e.jsx("div",{className:"text-center py-8",children:"No available materials found in this folder."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l(n).map(s=>e.jsx(h,{product:s},s.id))})}),e.jsx(u,{value:"upcoming",children:t?e.jsx("div",{className:"text-center py-8",children:"Loading premium materials..."}):l(d).length===0?e.jsx("div",{className:"text-center py-8",children:"No upcoming materials found in this folder."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l(d).map(s=>e.jsx(h,{product:s},s.id))})})]})]}):e.jsxs("div",{className:"space-y-8",children:[p.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(b,{className:"text-academy-red"}),"Premium Folders"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:p.map(s=>e.jsx(G,{folder:s,onClick:()=>L(s.id)},s.id))})]}),e.jsx("div",{children:e.jsxs(C,{defaultValue:"available",className:"w-full",children:[e.jsxs(w,{className:"mb-4",children:[e.jsxs(x,{value:"available",children:["Available Materials (",l(n).length,")"]}),e.jsxs(x,{value:"upcoming",children:["Coming Soon (",l(d).length,")"]})]}),e.jsx(u,{value:"available",children:t?e.jsx("div",{className:"text-center py-8",children:"Loading premium materials..."}):l(n).length===0?e.jsx("div",{className:"text-center py-8",children:"No available premium materials found."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l(n).map(s=>e.jsx(h,{product:s},s.id))})}),e.jsx(u,{value:"upcoming",children:t?e.jsx("div",{className:"text-center py-8",children:"Loading premium materials..."}):l(d).length===0?e.jsx("div",{className:"text-center py-8",children:"No upcoming premium materials found."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l(d).map(s=>e.jsx(h,{product:s},s.id))})})]})})]})]})};export{Z as default};
