import{c as S,r as N,s as i,d as A,as as C,j as s,N as b,h as e,m as a,B as f,C as L,i as x,k as o,b as h,L as j}from"./index-BXWU0Hg5.js";import{A as k}from"./AdminNavigation-DJ695m3V.js";import{A as m,D as v,Z as U}from"./zap-JRDQbuNW.js";import{U as y}from"./users-Cw1rqHlu.js";import{S as R}from"./settings-BZVYrD6l.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=S("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),_=()=>{const[r,c]=N.useState({totalUsers:0,totalClasses:0,totalMaterials:0,totalRegistrations:0,loading:!0}),t=async()=>{try{c(n=>({...n,loading:!0}));const[l,d,g,u]=await Promise.all([i.from("profiles").select("id",{count:"exact",head:!0}),i.from("classes").select("id",{count:"exact",head:!0}),i.from("study_materials").select("id",{count:"exact",head:!0}),i.from("class_registrations").select("id",{count:"exact",head:!0})]);c({totalUsers:l.count||0,totalClasses:d.count||0,totalMaterials:g.count||0,totalRegistrations:u.count||0,loading:!1})}catch(l){console.error("Error fetching admin stats:",l),c(d=>({...d,loading:!1}))}};return N.useEffect(()=>{t();const l=i.channel("admin-stats").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},t).on("postgres_changes",{event:"*",schema:"public",table:"classes"},t).on("postgres_changes",{event:"*",schema:"public",table:"study_materials"},t).on("postgres_changes",{event:"*",schema:"public",table:"class_registrations"},t).subscribe();return()=>{i.removeChannel(l)}},[]),r},P=()=>{const{user:r}=A(),{isAdmin:c,loading:t}=C(),{totalUsers:l,totalClasses:d,totalMaterials:g,totalRegistrations:u,loading:n}=_();return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):r?c?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(k,{}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Welcome back, ",r==null?void 0:r.phoneNumber]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[s.jsx(e,{className:"hover:shadow-md transition-shadow",children:s.jsx(a,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n?"...":l.toLocaleString()}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx(m,{className:"h-3 w-3 mr-1"}),"Live data"]})]}),s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(y,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})})]})})}),s.jsx(e,{className:"hover:shadow-md transition-shadow",children:s.jsx(a,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Study Materials"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n?"...":g.toLocaleString()}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx(m,{className:"h-3 w-3 mr-1"}),"Live data"]})]}),s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(f,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})})]})})}),s.jsx(e,{className:"hover:shadow-md transition-shadow",children:s.jsx(a,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Active Classes"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n?"...":d.toLocaleString()}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx(m,{className:"h-3 w-3 mr-1"}),"Live data"]})]}),s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(L,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})})]})})}),s.jsx(e,{className:"hover:shadow-md transition-shadow",children:s.jsx(a,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Class Registrations"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n?"...":u.toLocaleString()}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[s.jsx(m,{className:"h-3 w-3 mr-1"}),"Live data"]})]}),s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(M,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-600"})})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[s.jsxs(e,{className:"lg:col-span-1",children:[s.jsx(x,{className:"pb-3",children:s.jsx(o,{className:"text-lg",children:"Quick Actions"})}),s.jsxs(a,{className:"space-y-3",children:[s.jsx(h,{className:"w-full justify-start h-11",variant:"outline",asChild:!0,children:s.jsxs(j,{to:"/admin/users",children:[s.jsx(y,{className:"mr-3 h-4 w-4"}),"Manage Users"]})}),s.jsx(h,{className:"w-full justify-start h-11",variant:"outline",asChild:!0,children:s.jsxs(j,{to:"/admin",children:[s.jsx(f,{className:"mr-3 h-4 w-4"}),"Add Study Material"]})}),s.jsx(h,{className:"w-full justify-start h-11",variant:"outline",asChild:!0,children:s.jsxs(j,{to:"/admin/system-settings",children:[s.jsx(R,{className:"mr-3 h-4 w-4"}),"System Settings"]})})]})]}),s.jsxs(e,{className:"lg:col-span-1",children:[s.jsx(x,{className:"pb-3",children:s.jsx(o,{className:"text-lg",children:"Admin Management"})}),s.jsx(a,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage admin access for phone numbers. +918888769281 is configured as admin."}),s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900",children:"How to add new admins:"}),s.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Use SQL function to promote phone numbers"}),s.jsx("li",{children:"Phone numbers are added to pending admins"}),s.jsx("li",{children:"Users become admin automatically on signup"})]})]}),s.jsx(h,{size:"sm",variant:"outline",className:"w-full",children:"View Admin Logs"})]})})]}),s.jsxs(e,{className:"lg:col-span-2 xl:col-span-1",children:[s.jsx(x,{className:"pb-3",children:s.jsx(o,{className:"text-lg",children:"Recent Activity"})}),s.jsx(a,{children:s.jsx("div",{className:"space-y-4",children:[{type:"user",message:"New user registered",time:"2 min ago",color:"bg-green-500"},{type:"purchase",message:"Material purchased",time:"5 min ago",color:"bg-blue-500"},{type:"system",message:"System backup completed",time:"1 hour ago",color:"bg-purple-500"},{type:"admin",message:"Admin login detected",time:"2 hours ago",color:"bg-orange-500"}].map((p,w)=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:`w-2 h-2 ${p.color} rounded-full flex-shrink-0`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:p.message}),s.jsx("p",{className:"text-xs text-gray-500",children:p.time})]})]},w))})})]}),s.jsxs(e,{className:"lg:col-span-2",children:[s.jsx(x,{className:"pb-3",children:s.jsxs(o,{className:"text-lg flex items-center gap-2",children:[s.jsx(v,{className:"h-5 w-5"}),"System Settings & Performance"]})}),s.jsxs(a,{children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx(U,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:"99.9%"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Server Uptime"})]}),s.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx(m,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:"245ms"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Response Time"})]}),s.jsxs("div",{className:"text-center p-3 sm:p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg sm:col-span-2 lg:col-span-1",children:[s.jsx(v,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:"Excellent"}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Database Health"})]})]}),s.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-muted rounded-lg",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"System Settings:"})," Configure admin permissions, backup schedules, email notifications, and system maintenance windows. Monitor real-time database performance and user activity metrics."]})})]})]})]})]})]}):s.jsx(b,{to:"/",replace:!0}):s.jsx(b,{to:"/auth",replace:!0})};export{P as default};
